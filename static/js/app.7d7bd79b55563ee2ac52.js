webpackJsonp([2],[function(t,e,i){function a(t){i(116)}var s=i(1)(i(117),i(118),a,null,null);t.exports=s.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),s=i(48),n=i.n(s),o=i(53);a.a.config.productionTip=!1,new a.a({el:"#app",router:o.a,template:"<App/>",components:{App:n.a}})},,function(t,e,i){function a(t){i(49)}var s=i(1)(i(51),i(52),a,null,null);t.exports=s.exports},function(t,e){},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]}},function(t,e,i){"use strict";var a=i(6),s=i(54),n=i(55),o=i.n(n);a.a.use(s.a),e.a=new s.a({routes:[{path:"/",redirect:"/books/711/editions/884",name:"Main"},{path:"/books/:book/editions/:edition",name:"Manifest",component:o.a,props:!0},{path:"/books/:book/editions/:edition/pages/:page",name:"PageLink",component:o.a,props:!0},{path:"/books/:book/editions/:edition/images/:image",name:"ImageLink",component:o.a,props:!0},{path:"/books/:book/editions/:edition/artworks/:tab",name:"ArtworkLink",component:o.a,props:!0}]})},,function(t,e,i){var a=i(1)(i(56),i(162),null,null,null);t.exports=a.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(57),s=i.n(a);e.default={name:"main",components:{Reader:s.a},props:{origin:{default:"https://s3.amazonaws.com/pubs-fchasen/books",type:String},book:{default:"",type:String},edition:{default:"",type:String},page:{default:void 0},image:{default:void 0,type:String},tab:{default:void 0}},data:function(){return{url:this.origin+"/"+this.book+"/editions/"+this.edition+"/manifest.json"}}}},function(t,e,i){function a(t){i(58),i(59)}var s=i(1)(i(60),i(161),a,null,null);t.exports=s.exports},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),s=i(61),n=i.n(s),o=i(112),r=i.n(o),c=i(120),l=i.n(c),h=i(124),d=i.n(h),u=i(137),p=i.n(u),g=i(44),f=(i.n(g),i(141),i(43),i(142),i(143),i(144),i(145),i(146),i(147),i(148),i(149),i(150),i(151),i(152),i(153),i(154),i(155),i(156),i(157),i(0)),v=i.n(f),m=i(158),w=i.n(m),_=i(159),y=(i.n(_),i(160)),C=i.n(y);a.a.use(w.a,{}),e.default={name:"reader",components:{PDF:n.a,grid:l.a,tablegrid:r.a,icon:v.a,outline:d.a,detail:p.a},props:{"manifest-url":{type:String},"page-url":{default:void 0},"image-url":{type:String},"show-grid":{default:void 0},"show-table":{default:void 0}},data:function(){var t=this.getBounds();return{manifest:{},images:[],page:0,displayedPage:0,spreads:!0,manualSpreads:!1,currentDetail:void 0,width:t.width,height:t.height,outline:void 0,outlineOpen:!1,query:"",matchCount:void 0,currentMatchIndex:void 0,zoomLevel:1,shownDetail:void 0,displayedDetail:void 0,activeTab:0,title:"",shortTitle:"",current:"",isModalActive:!1,showSearch:!1,artworkOpen:!1,navOpen:!1,totalPages:1,editingPage:!1,navTimeout:void 0,tableFilter:void 0}},created:function(){this.pageUrl&&(this.page=parseInt(this.pageUrl)),this.fetchManifest(),this.currentDetail=void 0,this.toggleNav(),this.addListeners(),this.handleResize(),this._showTable(),this._showGrid()},beforeDestory:function(){this.removeListeners()},computed:{displayedPages:function(){return this.spreads&&0!==this.displayedPage?this.displayedPage===this.totalPages-1?this.displayedPage+1:this.displayedPage+"–"+(this.displayedPage+1):this.displayedPage+1}},watch:{showTable:function(){this._showTable()},showGrid:function(){this._showGrid()},artworkOpen:function(t){var e=this.$refs.grid;e.handleResize(),e.triggerLoad(),t?this.$router.push({name:"ArtworkLink",params:{tab:0===this.activeTab?"grid":"table"}}):this.displayedPage?this.$router.push({name:"PageLink",params:{page:this.displayedPage}}):this.$router.push({name:"Manifest"})},activeTab:function(){0===this.activeTab?this.$router.push({name:"ArtworkLink",params:{tab:"grid"}}):1===this.activeTab&&this.$router.push({name:"ArtworkLink",params:{tab:"table"}})},pageUrl:function(){if(this.loaded){var t=parseInt(this.pageUrl);this.page!==t&&this.displayedPage!==t&&(this.page=t)}},imageUrl:function(){this.loaded&&(this.currentDetail=this.imageUrl)},displayedDetail:function(){this.displayedDetail?this.$router.push({name:"ImageLink",params:{image:this.displayedDetail}}):this.$router.push({name:"Manifest"})},displayedPage:function(){this.displayedPage?this.$router.push({name:"PageLink",params:{page:this.displayedPage}}):this.$router.push({name:"Manifest"})},spreads:function(){},isModalActive:function(t){t?this.displayedDetail&&this.$router.push({name:"ImageLink",params:{image:this.displayedDetail}}):this.displayedPage?this.$router.push({name:"PageLink",params:{page:this.displayedPage}}):this.$router.push({name:"Manifest"})}},methods:{fetchManifest:function(){var t=this;return fetch(this.manifestUrl).then(function(t){return t.json()}).then(function(e){t.manifest=e,t.shortTitle=e.title,t.title=e.title,e.subtitle&&(t.title+=": "+e.subtitle),t.title+=" – "+e.author_as_it_appears,t.imageUrl&&(t.currentDetail=t.imageUrl)}).catch(function(t){return console.error(t)})},loaded:function(t){this.loaded=!0,this.pdfDocument=t,this.images=this.manifest.images,this.totalPages=t.numPages},next:function(t){this.$refs.pdf.next(),t.stopPropagation(),t.preventDefault()},prev:function(t){this.$refs.pdf.prev(),t.stopPropagation(),t.preventDefault()},keyListener:function(t){var e=t.keyCode;37===e?this.prev():39===e&&this.next()},handleResize:function(){var t=this.getBounds();this.width=t.width,this.height=t.height,this.manualSpreads||(this.width<600&&!0===this.spreads&&(this.spreads=!1),this.width>=600&&!1===this.spreads&&(this.spreads=!0))},goto:function(t){var e=this,i=this.$refs.pdf;return this.outlineOpen=!1,i.getPageIndex(t[0]).then(function(t){e.page=t}).catch(function(t){return console.error(t)})},onImageSelected:function(t){this.currentDetail=t,this.displayedDetail&&!this.isModalActive&&(this.isModalActive=!0)},onPageSelected:function(t){this.page=t-1,this.isModalActive=!1,this.artworkOpen=!1,this.currentDetail=void 0},onInfoSelected:function(t){this.toggleTable(),this.tableFilter=t,this.isModalActive=!1,this.artworkOpen=!0,this.currentDetail=void 0},onImageClicked:function(t){this.currentDetail=t.objId,this.displayedDetail&&!this.isModalActive&&(this.isModalActive=!0)},onDetailClosed:function(){this.currentDetail=void 0,this.displayedDetail=void 0,this.isModalActive=!1},onDetailDisplayed:function(t){this.displayedDetail=t,this.isModalActive=!0},onFound:function(t){this.matchCount=t},onMatch:function(t){this.currentMatchIndex=t+1},onCurrentTitle:function(t){this.current=t,"Cover"===t&&(this.current="")},getBounds:function(){return{width:window.innerWidth,height:window.innerHeight}},setSpreads:function(t){this.spreads!==t&&(this.spreads=t),this.manualSpreads=!0},onOutlineReady:function(t){this.outline=t},onPageChanged:function(t){this.displayedPage=t[t.length-1],this.page=-1},onTabChanged:function(t){var e=this.$refs,i=e.grid,a=e.table;0===t&&(i.handleResize(),i.triggerLoad()),1===t&&a.triggerLoad()},toggleTable:function(){this.activeTab=1},toggleGrid:function(){this.activeTab=0},nextMatch:function(){this.$refs.pdf.nextMatch()},prevMatch:function(){this.$refs.pdf.prevMatch()},zoomIn:function(){this.zoomLevel=Math.round(10*this.zoomLevel+2)/10},zoomOut:function(){this.zoomLevel>.2&&(this.zoomLevel=Math.round(10*this.zoomLevel-2)/10)},showNav:function(){clearTimeout(this.navTimeout),this.navOpen=!0},hideNav:function(){this.navOpen=!1},toggleNav:function(){var t=this;this.navOpen?(clearTimeout(this.navTimeout),this.hideNav()):(this.showNav(),this.navTimeout=setTimeout(function(){t.hideNav()},2e3))},onMouseMove:function(t){var e=this,i=t.y;this.mouseMoved=!0,i<100||i>window.innerHeight-100?this.openNav||(this.openNav=setTimeout(function(){e.showNav()},300)):this.openNav&&(clearTimeout(this.openNav),this.openNav=void 0,this.navOpen&&this.hideNav())},onMouseDown:function(t){this.mouseMoved=!1},onTouchMove:function(t){this.mouseMoved=!0},onClick:function(t){var e=t.y;e>100&&e<window.innerHeight-100&&(this.mouseMoved||this.outlineOpen||this.outlineOpen||this.isModalActive||this.toggleNav()),this.mouseMoved=!1},addListeners:function(){this._handleResize=C.a(this.handleResize.bind(this),200),window.addEventListener("keyup",this.keyListener.bind(this),!1),window.addEventListener("resize",this._handleResize,!1),window.addEventListener("mousemove",this.onMouseMove.bind(this),!1),window.addEventListener("mousedown",this.onMouseDown.bind(this),!1),window.addEventListener("click",this.onClick.bind(this),!1),window.addEventListener("touchend",this.onClick.bind(this),!1),window.addEventListener("touchstart",this.onMouseDown.bind(this),!1),window.addEventListener("touchmove",this.onTouchMove.bind(this),!1)},removeListeners:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("keyup",this.keyListener),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("click",this.onClick),window.removeEventListener("touchend",this.onClick),window.removeEventListener("touchstart",this.onMouseDown),window.removeEventListener("touchmove",this.onTouchStart)},startPageEditing:function(){this.editingPage=!0,this.$refs.pageEditor.focus(),this.$refs.pageEditor.value=""},onPageEdited:function(t){var e=parseInt(t.target.value);e&&(this.page=e-1),this.editingPage=!1},_showTable:function(){var t=this.$refs.table;this.showTable?(this.artworkOpen=!0,this.toggleTable()):this.showTable||this.showGrid||(this.artworkOpen=!1),t&&t.triggerLoad()},_showGrid:function(){var t=this.$refs.grid;this.showGrid?(this.artworkOpen=!0,this.toggleGrid()):this.showGrid||this.showTable||(this.artworkOpen=!1),t&&t.triggerLoad()}}}},function(t,e,i){function a(t){i(62)}var s=i(1)(i(63),i(111),a,"data-v-84dcc46e",null);t.exports=s.exports},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(64),s=i.n(a),n=i(77),o=i.n(n),r=i(10);r.PDFJS.workerSrc="static/libs/pdfjs-dist/build/pdf.worker.js",e.default={name:"pdf",components:{Page:s.a,Search:o.a},props:{src:{type:String},width:{type:Number,default:void 0},height:{type:Number,default:void 0},page:{default:0,type:Number},spreads:{default:!0,type:Boolean},onImageClicked:{default:void 0,type:Function},onOutlineReady:{default:void 0,type:Function},query:{default:void 0,type:String},zoom:{default:1,type:Number}},data:function(){return{pdfDocument:void 0,numPages:0,scale:1,rotate:void 0,isLoading:!0,viewportWidth:0,viewportHeight:0,viewportLeft:0,viewportTop:0,displayedPage:0,displayedPages:[],displayedPagesNumbers:[],outline:void 0,pageMatchesLength:[],pageMatches:[],matched:[],selectedMatch:{}}},updated:function(){},mounted:function(){var t=this;this.src&&this.loadDocument(this.src).then(function(){t.display(t.page)}).catch(function(t){return console.error(t)})},watch:{src:function(){var t=this;this.src&&this.loadDocument(this.src).then(function(){t.display(t.page)}).catch(function(t){return console.error(t)})},page:function(t){void 0!==this.page&&this.page>-1&&this.display(this.page)},spreads:function(t){void 0!==this.displayedPage&&this.display(this.displayedPage)},displayedPage:function(){this.$emit("pageChanged",this.displayedPagesNumbers)},query:function(){""===this.query&&this.clearMatches()},zoom:function(){var t=this.$refs.container,e=t.getBoundingClientRect();this.scrollLeftDelta=t.scrollLeft-(t.scrollWidth-e.width)/2,this.scrollTopDelta=t.scrollTop-(t.scrollHeight-e.height)/2}},methods:{loadDocument:function(t){var e=this;return r.getDocument(t).then(function(t){var i=t.numPages;e.numPages=i,e.pdfDocument=t,e.$emit("loaded",t),e.outline=t.getOutline().then(function(t){return e.processOutline(t)})}).catch(function(t){return console.error(t)})},display:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page;this.displayedPages=[],t<0||(t>this.numPages&&(t=0),this.spreads?(this.displayedPage=t%2!=0||0===t?t:t-1,this.displayedPage>0?(this.loadPage(this.displayedPage),this.displayedPage!==this.numPages-1?(this.loadPage(this.displayedPage+1),this.displayedPagesNumbers=[this.displayedPage,this.displayedPage+1]):this.displayedPagesNumbers=[this.displayedPage]):(this.loadPage(this.displayedPage),this.displayedPagesNumbers=[this.displayedPage])):(this.displayedPage=t,this.loadPage(this.displayedPage),this.displayedPagesNumbers=[this.displayedPage]))},next:function(){0===this.displayedPage?this.displayedPage+=1:this.displayedPage+=this.spreads?2:1,this.displayedPage<this.numPages?this.display(this.displayedPage):this.displayedPage=this.numPages-(this.spreads?2:1)},prev:function(){this.displayedPage>0&&(1===this.displayedPage?this.displayedPage-=1:this.displayedPage-=this.spreads?2:1,this.display(this.displayedPage))},loadPage:function(t){var e=this,i=this.pdfDocument;if(!i)throw new Error("Unexpected call to getPage() before the document has been loaded.");var a=t+1;return!t||a<1?a=1:a>=i.numPages&&(a=i.numPages),i.getPage(a).then(function(t){return e.onPageLoad(t)}).catch(function(t){return e.onPageError(t)})},onPageLoad:function(t){var e=this;this.displayedPagesNumbers.includes(t.pageIndex)&&(this.displayedPages.push(t),this.$nextTick(function(){var i=e.$refs["page_"+t.pageIndex][0];i.updatedSelectedMatch(e.selectedMatch),i.updateTextLayerMatches(e.query,e.pageMatches,e.pageMatchesLength)}))},afterDisplayed:function(){var t=this.$refs.container,e=t.getBoundingClientRect();t.scrollLeft=(t.scrollWidth-e.width)/2+this.scrollLeftDelta,t.scrollTop=(t.scrollHeight-e.height)/2+this.scrollTopDelta},onPageError:function(t){console.error(t)},handleViewport:function(t){this.viewportWidth=this.spreads&&this.displayedPage>0&&this.displayedPage<this.numPages-1?2*t.width:t.width,this.viewportHeight=t.height;var e=(this.width-this.viewportWidth)/2,i=(this.height-this.viewportHeight)/2;this.viewportLeft=e>0?e:0,this.viewportTop=i>0?i:0},processOutline:function(t){return this.onOutlineReady&&this.onOutlineReady(t),t},getPageIndex:function(t){return this.pdfDocument.getPageIndex(t)},onMatched:function(t,e,i,a){},onFound:function(t,e,i,a,s){if(this.pageMatches=i,this.pageMatchesLength=a,this.matched=e,this.$emit("found",s),this.matched&&this.matched.length)if(this.currentMatchIndex=0,this.selectedMatch=this.matched[this.currentMatchIndex],this.$emit("match",this.currentMatchIndex),this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)){var n=this.$refs["page_"+this.selectedMatch.pageIdx][0];n.updatedSelectedMatch(this.selectedMatch),n.updateTextLayerMatches(this.query,this.pageMatches,this.pageMatchesLength)}else this.display(this.selectedMatch.pageIdx)},onSelected:function(t){var e=this.$refs.container,i=e.getBoundingClientRect();e.scrollLeft=i.left+t.left,e.scrollTop=i.top+t.top},clearMatches:function(){var t=this;this.displayedPagesNumbers.forEach(function(e){t.$refs["page_"+e][0].updateTextLayerMatches("",[],null)})},nextMatch:function(){if(this.matched&&0!==this.matched.length)if(this.currentMatchIndex<this.matched.length-1?this.currentMatchIndex+=1:this.currentMatchIndex=0,this.selectedMatch=this.matched[this.currentMatchIndex],this.$emit("match",this.currentMatchIndex),this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)){var t=this.$refs["page_"+this.selectedMatch.pageIdx][0];t.updatedSelectedMatch(this.selectedMatch)}else this.display(this.selectedMatch.pageIdx)},prevMatch:function(){if(this.matched&&0!==this.matched.length)if(this.currentMatchIndex>0?this.currentMatchIndex-=1:this.currentMatchIndex=this.matched.length-1,this.selectedMatch=this.matched[this.currentMatchIndex],this.$emit("match",this.currentMatchIndex),this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)){var t=this.$refs["page_"+this.selectedMatch.pageIdx][0];t.updatedSelectedMatch(this.selectedMatch)}else this.display(this.selectedMatch.pageIdx)}}}},function(t,e,i){function a(t){i(65)}var s=i(1)(i(66),i(76),a,null,null);t.exports=s.exports},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(67),s=i.n(a),n=i(72),o=i.n(n);i(10).PDFJS.workerSrc="/static/libs/pdfjs-dist/build/pdf.worker.js",e.default={name:"page",components:{textlayer:s.a,imagelayer:o.a},props:{scale:{default:1,type:Number},rotate:{default:void 0,type:Number},width:{type:Number},height:{type:Number},page:{default:void 0,type:Object},onViewport:{default:void 0,type:Function},onImageClicked:{default:void 0,type:Function},onSelected:{default:void 0,type:Function}},data:function(){return{pdf:void 0,isLoading:!0,viewportWidth:0,viewportHeight:0,viewportScale:1,viewport:void 0,textContent:void 0,images:[],pageIndex:void 0}},updated:function(){},mounted:function(){this.page&&this.displayPage(this.page)},watch:{page:function(){this.page&&this.displayPage(this.page)},scale:function(){this.displaying||void 0!==this.scale&&this.displayPage(this.page)},width:function(){this.displaying||void 0!==this.scale&&this.displayPage(this.page)},height:function(){this.displaying||void 0!==this.scale&&this.displayPage(this.page)},pageMatches:function(){}},methods:{getPageScale:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page,e=this.scale,i=this.width,a=this.height,s=1;return s=i<a?i/t.getViewport(e).width:a/t.getViewport(e).height,e*s},displayPage:function(t){var e=this,i=this.$refs.canvas,a=i.getContext("2d"),s=this.scale,n=1!==s?s:this.getPageScale(t),o=t.getViewport(n),r=this.images,c=0,l={beginLayout:function(){},endLayout:function(){},appendImage:function(e){e.page=t.pageIndex,e.index=c,r.push(e),c++}};this.pageIndex=t.pageIndex,this.viewport=o,this.viewportScale=s,this.viewportHeight=o.height,this.viewportWidth=o.width,this.onViewport&&this.onViewport(o),this.displaying=!0,t.render({canvasContext:a,viewport:o,imageLayer:l}).then(function(){e.$emit("displayed",e),e.displaying=!1}).catch(function(t){return console.error(t)})},onPageError:function(t){console.error(t)},updateTextLayerMatches:function(t,e,i){this.query=t,this.pageMatchesLength=i,this.pageMatches=e,e&&e.length>this.pageIndex?this.$refs.textLayer.updateTextLayerMatches(t,e[this.pageIndex],i?i[this.pageIndex]:null):this.$refs.textLayer.clearTextLayerMatches()},updatedSelectedMatch:function(t){this.selectedMatch=t,this.pageIndex===t.pageIdx&&this.$refs.textLayer.selectedMatch(t.pageIdx,t.matchIdx)}}}},function(t,e,i){function a(t){i(68),i(69)}var s=i(1)(i(70),i(71),a,"data-v-448030bb",null);t.exports=s.exports},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(10);e.default={name:"textlayer",props:{page:{default:void 0},viewport:{default:void 0},renderTimeout:{default:300,type:Number}},data:function(){return{matches:[],textDivs:[],selected:{pageIdx:-1,matchIdx:-1},query:""}},updated:function(){},mounted:function(){var t=this;this.page&&this.getTextContent(this.page).then(function(e){return t.onContent(e)}).catch(function(t){return console.error(t)})},destroyed:function(){},watch:{page:function(){var t=this;this.page&&this.getTextContent(this.page).then(function(e){return t.onContent(e)}).catch(function(t){return console.error(t)})},viewport:function(){this.textContent&&this.onContent(this.textContent)}},methods:{getTextContent:function(t){return t.getTextContent({normalizeWhitespace:!0})},onContent:function(t){var e=this,i=this.$refs.textLayer;this.clearTextLayer(),this.textContent=t,this.textDivs=[];var s=document.createDocumentFragment();this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textLayerRenderTask=a.renderTextLayer({textContent:t,container:s,viewport:this.viewport,textDivs:this.textDivs,timeout:this.renderTimeout}),this.textLayerRenderTask.promise.then(function(){i.appendChild(s),e.pageMatches&&(e.matches=e.convertMatches(e.pageMatches,e.pageMatchesLength),e.renderMatches(e.matches))}).catch(function(t){return console.warn(t)})},onPageError:function(t){console.error(t)},clearTextLayer:function(){for(var t=this.$refs.textLayer;t.firstChild;)t.removeChild(t.firstChild)},updateTextLayerMatches:function(t,e,i){this.pageMatches=e,this.pageMatchesLength=i,this.query=t,this.textContent&&(this.clearMatches(),this.matches=this.convertMatches(this.pageMatches,this.pageMatchesLength),this.renderMatches(this.matches))},clearTextLayerMatches:function(){this.pageMatches=[],this.pageMatchesLength=[],this.query="",this.clearMatches(),this.selected={pageIdx:-1,matchIdx:-1},this._sentSelected=!1},selectedMatch:function(t,e){this._sentSelected=!1,this.clearMatches(),this.selected={pageIdx:t,matchIdx:e},this.renderMatches(this.matches)},renderMatches:function(t){function e(t,e){var a=t.divIdx;s[a].textContent="",i(a,0,t.offset,e)}function i(t,e,i,n){var o=s[t],r=a[t].str.substring(e,i),c=document.createTextNode(r);if(n){var l=document.createElement("span");return l.className=n,l.appendChild(c),void o.appendChild(l)}o.appendChild(c)}if(0!==t.length){var a=this.textContent.items,s=this.textDivs,n=null,o=this.page.pageIndex,r=this.selected.pageIdx===o,c=this.selected.matchIdx||-1,l={divIdx:-1,offset:void 0},h=c,d=h+1;h=0,d=t.length;for(var u=h;u<d;u++){var p=t[u],g=p.begin,f=p.end,v=r&&p.matchIdx===c,m=v?" selected":"";if(v&&!this._sentSelected&&(this.$emit("selected",s[g.divIdx].getBoundingClientRect()),this._sentSelected=!0),n&&g.divIdx===n.divIdx?i(n.divIdx,n.offset,g.offset):(null!==n&&i(n.divIdx,n.offset,l.offset),e(g)),g.divIdx===f.divIdx)i(g.divIdx,g.offset,f.offset,"highlight"+m);else{i(g.divIdx,g.offset,l.offset,"highlight begin"+m);for(var w=g.divIdx+1,_=f.divIdx;w<_;w++)s[w].className="highlight middle"+m;e(f,"highlight end"+m)}n=f}n&&i(n.divIdx,n.offset,l.offset)}},convertMatches:function(t,e){var i=0,a=0,s=this.textContent.items,n=s.length-1,o=this.query?this.query.length:0,r=[];if(!t)return r;for(var c=0,l=t.length;c<l;c++){for(var h=t[c];i!==n&&h>=a+s[i].str.length;)a+=s[i].str.length,i++;i===s.length&&console.error("Could not find a matching mapping");var d={matchIdx:h,begin:{divIdx:i,offset:h-a}};for(h+=e?e[c]:o;i!==n&&h>a+s[i].str.length;)a+=s[i].str.length,i++;d.end={divIdx:i,offset:h-a},r.push(d)}return r},clearMatches:function(){if(this.textContent)for(var t=this.matches,e=this.textDivs,i=this.textContent.items,a=-1,s=0,n=t.length;s<n;s++){for(var o=t[s],r=Math.max(a,o.begin.divIdx),c=r,l=o.end.divIdx;c<=l;c++){var h=e[c];h.textContent=i[c].str,h.className=""}a=o.end.divIdx+1}}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"textLayer",staticClass:"textLayer",style:{width:(t.viewport?t.viewport.width:0)+"px",height:(t.viewport?t.viewport.height:0)+"px"}})},staticRenderFns:[]}},function(t,e,i){function a(t){i(73)}var s=i(1)(i(74),i(75),a,"data-v-633d2fa2",null);t.exports=s.exports},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"imagelayer",props:{images:{default:[],type:Array},viewport:{default:void 0,type:Object},onImageClicked:{default:void 0,type:Function}},data:function(){return{}},updated:function(){},mounted:function(){this.images},watch:{images:function(){this.images}},methods:{handleClick:function(t){this.onImageClicked&&this.onImageClicked(t),this.$emit("imageClicked",t)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"imageLayer",staticClass:"imageLayer",style:{width:(t.viewport?t.viewport.width:0)+"px",height:(t.viewport?t.viewport.height:0)+"px"}},t._l(t.images,function(e){return i("div",{ref:e.objId,refInFor:!0,staticClass:"imageLayerItem",style:{width:e.width+"px",height:e.height+"px",top:e.top-e.height+"px",left:e.left+"px"},attrs:{id:e.objId},on:{click:function(i){t.handleClick(e)}}})}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pageWrapper",class:{loading:t.isLoading},style:{width:t.viewportWidth+"px",height:t.viewportHeight+"px"}},[i("canvas",{ref:"canvas",attrs:{width:t.viewportWidth+"px",height:t.viewportHeight+"px"}}),t._v(" "),i("textlayer",{ref:"textLayer",attrs:{page:t.page,viewport:t.viewport,scale:t.scale},on:{selected:t.onSelected}}),t._v(" "),i("imagelayer",{attrs:{images:t.images,viewport:t.viewport,scale:t.scale,onImageClicked:t.onImageClicked}}),t._v(" "),i("div",{ref:"annotationLayer"})],1)},staticRenderFns:[]}},function(t,e,i){var a=i(1)(i(78),i(110),null,null,null);t.exports=a.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(79),s=i.n(a),n=i(27),o=i.n(n),r=i(10),c=(i.n(r),{"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"}),l=o.a(c).join(""),h=new RegExp("["+l+"]","g");e.default={name:"search",props:{waitTimeout:{default:30,type:Number},pdfDocument:{default:void 0},query:{default:"",type:String},phraseSearch:{default:!0,type:Boolean},minQueryLength:{default:3,type:Number}},data:function(){return{matches:[],textDivs:[],pageContents:[],pageMatches:[],pageMatchesLength:null,matchCount:0,pagesCount:0,pendingFindMatches:{},active:!1,pagesToSearch:null,extractTextPromises:[],matched:[]}},updated:function(){},mounted:function(){this.pdfDocument&&this.extractText()},watch:{pdfDocument:function(){this.pdfDocument&&this.extractText()},query:function(){var t=this;""===this.query&&this.reset(),clearTimeout(this.findTimeout),this.findTimeout=setTimeout(function(){t.query.length>t.minQueryLength&&t.find(t.query)},250)}},methods:{reset:function(){this.matched=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.$emit("matched",this.matched,this.pageMatchesLength,this.matchCount),this.$emit("found",this.pageMatches,this.pageMatchesLength,this.matchCount)},find:function(t){var e=this,i=this.pagesCount;if(!this.prevQuery||this.prevQuery!==t){this.prevQuery=t,this.matched=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1};for(var a=0;a<i;a++)a in this.pendingFindMatches||(this.pendingFindMatches[a]=!0,this.extractTextPromises[a].then(function(t){delete e.pendingFindMatches[t],e.calcFindMatch(t)}))}},normalize:function(t){return t.replace(h,function(t){return c[t]})},_prepareMatches:function(t,e,i){t.sort(function(t,e){return t.match===e.match?t.matchLength-e.matchLength:t.match-e.match});for(var a=0,s=t.length;a<s;a++)(function(t,e){var i=t[e],a=t[e+1];if(e<t.length-1&&i.match===a.match)return i.skipped=!0,!0;for(var s=e-1;s>=0;s--){var n=t[s];if(!n.skipped){if(n.match+n.matchLength<i.match)break;if(n.match+n.matchLength>=i.match+i.matchLength)return i.skipped=!0,!0}}return!1})(t,a)||(e.push(t[a].match),i.push(t[a].matchLength))},calcFindPhraseMatch:function(t,e,i){for(var a=[],s=t.length,n=-s;;){if(-1===(n=i.indexOf(t,n+s)))break;a.push(n)}this.pageMatches[e]=a},calcFindWordMatch:function(t,e,i){for(var a=[],s=t.match(/\S+/g),n=0,o=s.length;n<o;n++)for(var r=s[n],c=r.length,l=-c;;){if(-1===(l=i.indexOf(r,l+c)))break;a.push({match:l,matchLength:c,skipped:!1})}this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[e]=[],this.pageMatches[e]=[],this._prepareMatches(a,this.pageMatches[e],this.pageMatchesLength[e])},calcFindMatch:function(t){var e=this,i=this.normalize(this.pageContents[t]),a=this.normalize(this.query),s=this.caseSensitive,n=this.phraseSearch;0!==a.length&&(s||(i=i.toLowerCase(),a=a.toLowerCase()),n?this.calcFindPhraseMatch(a,t,i):this.calcFindWordMatch(a,t,i),t in this.pageMatches&&this.pageMatches[t].length>0&&(this.matchCount+=this.pageMatches[t].length,this.pageMatches[t].forEach(function(i){e.matched.push({matchIdx:i,pageIdx:t}),e.$emit("matched",e.query,e.matched,e.pageMatches[t],e.pageMatchesLength?e.pageMatchesLength[t]:null,e.matchCount)})),this.pageMatches.length===this.pagesCount&&this.$emit("found",this.query,this.matched,this.pageMatches,this.pageMatchesLength,this.matchCount))},getPageTextContent:function(t){return this.pdfDocument.getPage(t+1).then(function(t){return t.getTextContent({normalizeWhitespace:!0})}).catch(function(t){return console.error(t)})},extractText:function(){var t=this;if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents.length=0,this.pagesCount=this.pdfDocument.numPages-1;for(var e=s.a.resolve(),i=0,a=this.pagesCount;i<a;i++)!function(i,a){var s=r.createPromiseCapability();t.extractTextPromises[i]=s.promise,e=e.then(function(){return t.getPageTextContent(i).then(function(e){for(var a=e.items,n=[],o=0,r=a.length;o<r;o++)n.push(a[o].str);t.pageContents[i]=n.join(""),s.resolve(i)})})}(i)}}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"pageContainer",class:{loading:t.isLoading,centered:!t.spreads||t.zoom<=1},style:{width:t.width+"px",height:(t.height?t.height:t.viewportHeight)+"px"}},[i("div",{staticClass:"pages",style:{width:t.viewportWidth+"px",height:t.viewportHeight+"px",top:t.viewportTop+"px",left:t.viewportLeft+"px"}},t._l(t.displayedPages,function(e){return i("page",{key:e.pageIndex,ref:"page_"+e.pageIndex,refInFor:!0,staticClass:"page",attrs:{page:e,width:t.spreads?t.width/2-40:t.width-40,height:t.height-40,scale:t.zoom,onViewport:t.handleViewport,onImageClicked:t.onImageClicked,onSelected:t.onSelected},on:{displayed:t.afterDisplayed}})})),t._v(" "),i("search",{attrs:{pdfDocument:t.pdfDocument,query:t.query},on:{matched:this.onMatched,found:this.onFound}})],1)},staticRenderFns:[]}},function(t,e,i){function a(t){i(113),i(114)}var s=i(1)(i(115),i(119),a,"data-v-31beea36",null);t.exports=s.exports},function(t,e){},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(27),s=i.n(a),n=i(42),o=i.n(n),r=i(6),c=(i(43),i(0)),l=i.n(c);r.a.use(o.a,{preLoad:1.3,attempt:1}),e.default={name:"table",components:{icon:l.a},props:{data:{type:Array},filter:{type:Object,default:void 0}},created:function(){var t=this;this.filter&&s.a(this.filter).forEach(function(e){var i=t.filter[e];"artwork_title"===e&&(t.artworkFilter=i),"artist_name"===e&&(t.artistFilter=i),"collection"===e&&(t.collectionFilter=i)})},data:function(){var t={};return this.columns=["thumbnail","page","artwork_title","artist","collection"],this.columns.forEach(function(e){t[e]=1}),{sortKey:"",sortOrders:t,filterKey:"",gridColumns:[],imagesByArtwork:{},imagesByArtist:{},imagesByCollection:{},artworks:[],artists:[],collections:[],artistFilter:"",artworkFilter:"",collectionFilter:""}},computed:{filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),i=this.artworkFilter&&this.artworkFilter.toLowerCase(),a=this.artistFilter&&this.artistFilter.toLowerCase(),n=this.collectionFilter&&this.collectionFilter.toLowerCase(),o=this.sortOrders[t]||1,r=this.data;return i&&r&&(r=r.filter(function(t){if(t.artwork_title)return String(t.artwork_title).toLowerCase().indexOf(i)>-1})),a&&r&&(r=r.filter(function(t){if(t.artist_name)return String(t.artist_name).toLowerCase().indexOf(a)>-1})),n&&r&&(r=r.filter(function(t){if(t.collection)return String(t.collection).toLowerCase().indexOf(n)>-1})),e&&r&&(r=r.filter(function(t){return s.a(t).some(function(i){return String(t[i]).toLowerCase().indexOf(e)>-1})})),t&&(r=r.slice().sort(function(e,i){return e=e[t],i=i[t],(e===i?0:e>i?1:-1)*o})),r}},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},titlecase:function(t){var e;return e=t.replace(/_/g," "),e=e.replace(/([^\W_]+[^\s-]*) */g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}},watch:{data:function(){var t=this;this.data.forEach(function(e){if(e.artist_name){var i=encodeURI(e.artist_name);t.imagesByArtist[i]||(t.imagesByArtist[i]=[],t.artists.push({uri:i,name:e.artist_name})),t.imagesByArtist[i].push(e)}if(e.artwork_title){var a=encodeURI(e.artwork_title);t.imagesByArtwork[a]||(t.imagesByArtwork[a]=[],t.artworks.push({uri:a,name:e.artwork_title})),t.imagesByArtwork[a].push(e)}if(e.collection){var s=encodeURI(e.collection);t.imagesByCollection[s]||(t.imagesByCollection[s]=[],t.collections.push({uri:s,name:e.collection})),t.imagesByCollection[s].push(e)}})},filter:function(){var t=this;this.filter&&s.a(this.filter).forEach(function(e){var i=t.filter[e];"artwork_title"===e&&(t.artworkFilter=i),"artist_name"===e&&(t.artistFilter=i),"collection"===e&&(t.collectionFilter=i)})}},methods:{reset:function(){this.data=[],this.imagesByArtwork={},this.imagesByArtist={},this.imagesByCollection={},this.artworks={},this.artists={},this.collections={}},sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},triggerLoad:function(){r.a.nextTick(this.$Lazyload.lazyLoadHandler)}},updated:function(){}}},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),s={};e.default={name:"icon",props:{name:{type:String,validator:function(t){return t?t in s||(a.a.util.warn('Invalid prop: prop "icon" is referring to an unregistered icon "'+t+'".\nPlesase make sure you have imported this icon before using it.',this),!1):null}},scale:[Number,String],spin:Boolean,inverse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(a.a.util.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},clazz:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse}},icon:function(){return this.name?s[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,e=t.width,i=t.height;return Math.max(e,i)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(e){e.outerScale=t.normalizedScale});var e=0,i=0;this.$children.forEach(function(t){e=Math.max(e,t.width),i=Math.max(i,t.height)}),this.childrenWidth=e,this.childrenHeight=i,this.$children.forEach(function(t){t.x=(e-t.width)/2,t.y=(i-t.height)/2})}},register:function(t){for(var e in t){var i=t[e];i.paths||(i.paths=[]),i.d&&i.paths.push({d:i.d}),i.polygons||(i.polygons=[]),i.points&&i.polygons.push({points:i.points}),s[e]=i}},icons:s}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{class:t.clazz,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e){return i("path",t._b({},"path",e))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e){return i("polygon",t._b({},"polygon",e))}):t._e(),t._v("\b\n    "),t.icon&&t.icon.raw?[i("g",{domProps:{innerHTML:t._s(t.icon.raw)}})]:t._e()])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("nav",{staticClass:"nav section_nav"},[i("div",{staticClass:"nav-right",staticStyle:{overflow:"visible"}},[i("b-dropdown",{directives:[{name:"show",rawName:"v-show",value:!t.artworkFilter,expression:"!artworkFilter"}],attrs:{position:"is-bottom-left"},model:{value:t.artworkFilter,callback:function(e){t.artworkFilter=e},expression:"artworkFilter"}},[i("button",{staticClass:"button",on:{click:function(e){t.artworkFilter=void 0}},slot:"trigger"},[i("span",[t._v("Artworks")]),t._v(" "),i("b-icon",{attrs:{icon:"arrow_drop_down"}})],1),t._v(" "),t._l(t.artworks,function(e){return i("b-dropdown-option",{key:e.uri,attrs:{value:e.name,selected:t.artworkFilter===e.name}},[t._v(t._s(e.name))])})],2),t._v(" "),t.artworkFilter?i("span",{staticClass:"dropdown"},[i("button",{staticClass:"button",on:{click:function(e){t.artworkFilter=void 0}},slot:"trigger"},[i("span",[t._v(t._s(t.artworkFilter))]),t._v(" "),i("b-icon",{staticClass:"is-small",attrs:{icon:"close"}})],1)]):t._e(),t._v(" "),i("b-dropdown",{directives:[{name:"show",rawName:"v-show",value:!t.artistFilter,expression:"!artistFilter"}],attrs:{position:"is-bottom-left"},model:{value:t.artistFilter,callback:function(e){t.artistFilter=e},expression:"artistFilter"}},[i("button",{staticClass:"button",on:{click:function(e){t.artistFilter=void 0}},slot:"trigger"},[i("span",[t._v("Artist")]),t._v(" "),i("b-icon",{attrs:{icon:"arrow_drop_down"}})],1),t._v(" "),t._l(t.artists,function(e){return i("b-dropdown-option",{key:e.uri,attrs:{value:e.name,selected:t.artistFilter===e.name}},[t._v(t._s(e.name))])})],2),t._v(" "),t.artistFilter?i("span",{staticClass:"dropdown"},[i("button",{staticClass:"button",on:{click:function(e){t.artistFilter=void 0}},slot:"trigger"},[i("span",[t._v(t._s(t.artistFilter))]),t._v(" "),i("b-icon",{staticClass:"is-small",attrs:{icon:"close"}})],1)]):t._e(),t._v(" "),i("b-dropdown",{directives:[{name:"show",rawName:"v-show",value:!t.collectionFilter,expression:"!collectionFilter"}],attrs:{position:"is-bottom-left"},model:{value:t.collectionFilter,callback:function(e){t.collectionFilter=e},expression:"collectionFilter"}},[i("button",{staticClass:"button",on:{click:function(e){t.collectionFilter=void 0}},slot:"trigger"},[i("span",[t._v("Collection")]),t._v(" "),i("b-icon",{attrs:{icon:"arrow_drop_down"}})],1),t._v(" "),t._l(t.collections,function(e){return i("b-dropdown-option",{key:e.uri,attrs:{value:e.name,selected:t.collectionFilter===e.name}},[t._v(t._s(e.name))])})],2),t._v(" "),t.collectionFilter?i("span",{staticClass:"dropdown"},[i("button",{staticClass:"button",on:{click:function(e){t.collectionFilter=void 0}},slot:"trigger"},[i("span",[t._v(t._s(t.collectionFilter))]),t._v(" "),i("b-icon",{staticClass:"is-small",attrs:{icon:"close"}})],1)]):t._e(),t._v(" "),i("div",{staticClass:"nav-item"},[i("p",{staticClass:"control has-icons-right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],staticClass:"input has-icons-right",attrs:{name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}}),t._v(" "),i("span",{staticClass:"icon is-small is-right"},[i("icon",{attrs:{name:"search",title:"Search"}})],1)])])],1)]),t._v(" "),i("b-table",{attrs:{data:t.filteredData,bordered:!0,striped:!0,"mobile-cards":!0,paginated:!0,"per-page":8,"pagination-simple":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[i("b-table-column",{attrs:{field:"thumbnail",label:"",width:"40"}},[i("a",{staticClass:"img_link",on:{click:function(i){t.$emit("onImageClick",e.row)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.row.thumbnail,expression:"tb.row['thumbnail']"}]})])]),t._v(" "),i("b-table-column",{attrs:{field:"artwork",label:"Artwork",sortable:""}},[i("a",{directives:[{name:"show",rawName:"v-show",value:t.artworkFilter!=e.row.artwork_title,expression:"artworkFilter != tb.row.artwork_title"}],on:{click:function(i){t.artworkFilter=e.row.artwork_title}}},[t._v("\n              "+t._s(e.row.artwork_title)+"\n            ")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.artworkFilter===e.row.artwork_title,expression:"artworkFilter === tb.row.artwork_title"}]},[t._v("\n              "+t._s(e.row.artwork_title)+"\n            ")]),t._v(" "),e.row.artwork_uri?i("a",{staticClass:"button is-small is-pulled-right",attrs:{href:e.row.artwork_uri,target:"_blank"}},[i("span",[t._v("View in Collection")]),t._v(" "),i("b-icon",{staticClass:"is-small",attrs:{icon:"open_in_new"}})],1):t._e()]),t._v(" "),i("b-table-column",{attrs:{field:"artist",label:"Artist",sortable:""}},[i("a",{directives:[{name:"show",rawName:"v-show",value:t.artistFilter!=e.row.artist_name,expression:"artistFilter != tb.row.artist_name"}],on:{click:function(i){t.artistFilter=e.row.artist_name}}},[t._v("\n              "+t._s(e.row.artist_name)+"\n            ")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.artistFilter===e.row.artist_name,expression:"artistFilter === tb.row.artist_name"}]},[t._v("\n              "+t._s(e.row.artist_name)+"\n            ")]),t._v(" "),e.row.artist_uri?i("a",{staticClass:"button is-small is-pulled-right",attrs:{href:e.row.artist_uri,target:"_blank"}},[i("span",[t._v("ULAN")]),t._v(" "),i("b-icon",{staticClass:"is-small",attrs:{icon:"open_in_new"}})],1):t._e()]),t._v(" "),i("b-table-column",{attrs:{field:"collection",label:"Collection",sortable:""}},[i("a",{directives:[{name:"show",rawName:"v-show",value:t.collectionFilter!=e.row.collection,expression:"collectionFilter != tb.row.collection"}],on:{click:function(i){t.collectionFilter=e.row.collection}}},[t._v("\n              "+t._s(e.row.collection)+"\n            ")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.collectionFilter===e.row.collection,expression:"collectionFilter === tb.row.collection"}]},[t._v("\n              "+t._s(e.row.collection)+"\n            ")]),t._v(" "),e.row.collection_uri?i("a",{staticClass:"button is-small is-pulled-right",attrs:{href:e.row.collection_uri,target:"_blank"}},[i("b-icon",{staticClass:"is-small",attrs:{icon:"open_in_new"}})],1):t._e()]),t._v(" "),i("b-table-column",{attrs:{field:"page",label:"Page",sortable:"",width:"30"}},[i("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(i){t.$emit("onPageClick",e.row.page)}}},[i("span",[t._v(t._s(e.row.page_label||e.row.page))]),t._v(" "),i("b-icon",{staticClass:"is-small",attrs:{icon:"keyboard_arrow_right"}})],1)])]}}])})],1)},staticRenderFns:[]}},function(t,e,i){function a(t){i(121)}var s=i(1)(i(122),i(123),a,null,null);t.exports=s.exports},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(27),s=i.n(a),n=i(42),o=i.n(n),r=i(6);r.a.use(o.a),e.default={name:"grid",components:{},props:{data:{type:Array}},data:function(){var t={};return this.columns=["thumbnail"],this.columns.forEach(function(e){t[e]=1}),{sortKey:"",sortOrders:t,filterKey:"",gridColumns:4}},created:function(){var t=this;window.addEventListener("resize",this.handleResize.bind(this),!1),this.$nextTick(function(){return t.handleResize()})},beforeDestory:function(){window.removeEventListener("resize",this.handleResize)},computed:{filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),i=this.sortOrders[t]||1,a=this.data;return e&&a&&(a=a.filter(function(t){return s.a(t).some(function(i){return String(t[i]).toLowerCase().indexOf(e)>-1})})),t&&(a=a.slice().sort(function(e,a){return e=e[t],a=a[t],(e===a?0:e>a?1:-1)*i})),a},chunkedData:function(){for(var t=this.gridColumns||4,e=[],i=0;i<t;i++)e[i]=[];for(var a=0;a<this.data.length;a++)e[a%t].push(this.data[a]);return e}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},triggerLoad:function(){r.a.nextTick(this.$Lazyload.lazyLoadHandler)},handleResize:function(){var t=window.innerWidth;this.gridColumns=Math.floor((t-200)/200)}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"container card_container"},[i("div",{staticClass:"columns card_columns"},t._l(t.chunkedData,function(e){return i("div",{staticClass:"column"},t._l(e,function(e){return i("div",{staticClass:"card card_wrapper"},[i("div",{staticClass:"card-image"},[i("figure",{staticClass:"image"},[i("a",{staticClass:"img_link",on:{click:function(i){t.$emit("onClick",e)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.downsampled||e.asset,expression:"image.downsampled || image.asset"}],staticClass:"downsampled"})])])])])}))}))])},staticRenderFns:[]}},function(t,e,i){function a(t){i(125)}var s=i(1)(i(126),i(136),a,"data-v-7afe1999",null);t.exports=s.exports},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(127),s=i.n(a),n=i(130),o=i.n(n);e.default={name:"outline",components:{},props:{data:{type:Array},page:{type:Number,default:void 0},pdf:{type:Object,default:void 0}},data:function(){return{pageList:[],activeItem:void 0}},mounted:function(){this.data&&this.processData()},methods:{processData:function(){var t=this;this.pageList=[],this.data.forEach(function(e,i){var a=o.a({},e);t.pageList.push(a),t.pdf.getPageIndex(e.dest[0]).then(function(e){a.page=e,i===t.data.length-1&&t.checkActive()})})},handleLink:function(t){this.$emit("onClick",t.dest)},checkActive:function(){var t=!0,e=!1,i=void 0;try{for(var a,n=s.a(this.pageList);!(t=(a=n.next()).done);t=!0){var o=a.value;if(o.page>this.page){this.$emit("current",this.activeItem.title);break}this.activeItem=o}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}},watch:{data:function(){this.processData()},page:function(){this.checkActive()}}}},,,,,,,,,,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",t._l(t.pageList,function(e){return i("li",[i("a",{staticClass:"outline_link",class:{active:e===t.activeItem},on:{click:function(i){t.handleLink(e)}}},[t._v("\n      "+t._s(e.title||"")+"\n      "),e.items.length?i("outline",{attrs:{data:e.items},on:{onClick:t.handleLink}}):t._e()],1)])}))},staticRenderFns:[]}},function(t,e,i){function a(t){i(138)}var s=i(1)(i(139),i(140),a,null,null);t.exports=s.exports},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(44);i.n(a);e.default={name:"Detail",components:{},props:{image:{},manifest:{type:Object}},data:function(){return{images:[],imagesById:{},imagesByArtwork:{},imagesByArtist:{},imagesByCollection:{},currentDetail:void 0,hoverArtwork:!1,hoverArtist:!1,hoverCollection:!1}},created:function(){if(this.manifest&&this.loaded(),this.image){var t=void 0;t="string"==typeof this.image?this.image:this.imageRef(this.image),this.currentDetail=this.imagesById[t]}else this.currentDetail=void 0},watch:{manifest:function(){this.loaded()},image:function(){var t=void 0;this.image?(t="string"==typeof this.image?this.image:this.imageRef(this.image),this.currentDetail=this.imagesById[t],this.currentDetail||this.$emit("closed")):this.currentDetail=void 0},currentDetail:function(){var t=void 0;this.currentDetail?(t=this.imageRef(this.currentDetail),this.$emit("displayed",t)):this.$emit("closed")}},methods:{imageRef:function(t){return"img_p"+(t.page-1)+"_"+t.location},reset:function(){this.images=[],this.imagesById={},this.imagesByArtwork={},this.imagesByArtist={},this.imagesByCollection={}},loaded:function(){var t=this;this.manifest&&this.manifest.images&&(this.images=this.manifest.images,this.images.forEach(function(e){var i=t.imageRef(e);if(t.imagesById[i]=e,e.artwork_title){var a=encodeURI(e.artwork_title);t.imagesByArtwork[a]||(t.imagesByArtwork[a]=[]),t.imagesByArtwork[a].push(e)}if(e.artist_name){var s=encodeURI(e.artist_name);t.imagesByArtist[s]||(t.imagesByArtist[s]=[]),t.imagesByArtist[s].push(e)}if(e.collection){var n=encodeURI(e.collection);t.imagesByCollection[n]||(t.imagesByCollection[n]=[]),t.imagesByCollection[n].push(e)}}))},onPageSelected:function(t){this.$emit("pageSelected",t)},nextDetail:function(){var t=this.images.indexOf(this.currentDetail);t+1<this.images.length&&(this.currentDetail=this.images[t+1])},prevDetail:function(){var t=this.images.indexOf(this.currentDetail);t-1>=0&&(this.currentDetail=this.images[t-1])},onDetailClosed:function(){this.currentDetail=void 0,this.$emit("closed")},artistLookup:function(t){var e=this,i=this.currentDetail.artist_uri;i.indexOf(".json")===i.length-5&&(fetch(i).then(function(t){return t.json()}).then(function(t){e.currentDetail.artist_json=t,console.log(t)}).catch(function(t){return console.error(t)}),t.preventDefault())}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.currentDetail?i("div",{staticClass:"card detail_card"},[i("div",{staticClass:"card-image"},[i("figure",{staticClass:"image_detail"},[i("a",{attrs:{href:t.currentDetail.artwork_uri}},[t.currentDetail.copyright?t._e():i("img",{attrs:{src:t.currentDetail.asset}}),t._v(" "),t.currentDetail.copyright?i("img",{attrs:{src:t.currentDetail.downsampled}}):t._e()])])]),t._v(" "),i("div",{staticClass:"card-content"},[i("div",{staticClass:"content"},[i("h1",{staticClass:"title",class:{hover:t.hoverArtist}},[t._v("\n        "+t._s(t.currentDetail.artwork_title)+"\n        "),t.imagesByArtwork[encodeURI(t.currentDetail.artwork_title)]&&t.imagesByArtwork[encodeURI(t.currentDetail.artwork_title)].length>1?i("a",{staticClass:"button is-small",on:{click:function(e){t.$emit("infoSelected",{artwork_title:t.currentDetail.artwork_title})},mouseenter:function(e){t.hoverArtist=!0},mouseleave:function(e){t.hoverArtist=!1}}},[i("b-icon",{attrs:{icon:"filter",size:"is-small"}}),t._v(" "),i("span",[t._v("\n          "+t._s(t.imagesByArtwork[encodeURI(t.currentDetail.artwork_title)]&&t.imagesByArtwork[encodeURI(t.currentDetail.artwork_title)].length)+"\n          ")])],1):t._e()]),t._v(" "),i("h2",{staticClass:"subtitle",class:{hover:t.hoverArtwork}},[t._v("\n        "+t._s(t.currentDetail.artist_name)+"\n        "),t.imagesByArtist[encodeURI(t.currentDetail.artist_name)]&&t.imagesByArtist[encodeURI(t.currentDetail.artist_name)].length>1?i("a",{staticClass:"button is-small",on:{click:function(e){t.$emit("infoSelected",{artist_name:t.currentDetail.artist_name})},mouseenter:function(e){t.hoverArtwork=!0},mouseleave:function(e){t.hoverArtwork=!1}}},[i("b-icon",{attrs:{icon:"filter",size:"is-small"}}),t._v(" "),i("span",[t._v("\n            "+t._s(t.imagesByArtist[encodeURI(t.currentDetail.artist_name)]&&t.imagesByArtist[encodeURI(t.currentDetail.artist_name)].length)+"\n          ")])],1):t._e()]),t._v(" "),t.currentDetail.collection?i("p",{class:{hover:t.hoverCollection}},[t._v("\n        "+t._s(t.currentDetail.collection)+"\n        "),t.imagesByCollection[encodeURI(t.currentDetail.collection)]&&t.imagesByCollection[encodeURI(t.currentDetail.collection)].length>1?i("a",{staticClass:"button is-small",on:{click:function(e){t.$emit("infoSelected",{collection:t.currentDetail.collection})},mouseenter:function(e){t.hoverCollection=!0},mouseleave:function(e){t.hoverCollection=!1}}},[i("b-icon",{attrs:{icon:"filter",size:"is-small"}}),t._v(" "),i("span",[t._v("\n            "+t._s(t.imagesByCollection[encodeURI(t.currentDetail.collection)]&&t.imagesByCollection[encodeURI(t.currentDetail.collection)].length)+"\n          ")])],1):t._e()]):t._e()])]),t._v(" "),i("footer",{staticClass:"card-footer"},[t.currentDetail.artwork_uri?i("p",{staticClass:"card-footer-item"},[i("span",[t._v("\n      View in "),i("a",{attrs:{href:t.currentDetail.artwork_uri,target:"_blank"}},[t._v("Collection")])])]):t._e(),t._v(" "),i("p",{staticClass:"card-footer-item"},[i("span",[t._v("\n      View in "),i("a",{on:{click:function(e){t.onPageSelected(t.currentDetail.page)}}},[t._v("Book")])])])]),t._v(" "),i("div",{staticClass:"detail_arrow",attrs:{id:"prevDetail"},on:{click:this.prevDetail}},[t._v("‹")]),t._v(" "),i("div",{staticClass:"detail_arrow",attrs:{id:"nextDetail"},on:{click:this.nextDetail}},[t._v("›")])]):t._e()},staticRenderFns:[]}},,,,,,,,,,,,,,,,,,,function(t,e){},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("link",{attrs:{rel:"stylesheet",href:"//fonts.googleapis.com/icon?family=Material+Icons"}}),t._v(" "),i("nav",{staticClass:"nav fixed",class:{open:t.navOpen||t.outlineOpen||t.artworkOpen}},[i("div",{staticClass:"nav-left"},[i("a",{staticClass:"nav-item",on:{click:function(e){t.outlineOpen=!t.outlineOpen}}},[i("span",{staticClass:"icon"},[t.outlineOpen?t._e():i("icon",{attrs:{name:"bars",title:"Open Navigation"}}),t._v(" "),t.outlineOpen?i("icon",{attrs:{name:"close",title:"Close Navigation"}}):t._e()],1)]),t._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:!t.artworkOpen&&!t.showSearch,expression:"!artworkOpen && !showSearch"}],staticClass:"nav-item"},[i("span",{staticClass:"icon",on:{click:function(e){t.showSearch=!t.showSearch}}},[t.showSearch?t._e():i("icon",{attrs:{name:"search",title:"search"}}),t._v(" "),t.showSearch?i("icon",{attrs:{name:"close",title:"search"}}):t._e()],1)]),t._v(" "),t.showSearch&&!t.artworkOpen?i("div",{staticClass:"nav-item"},[i("div",{staticClass:"field has-addons"},[i("p",{staticClass:"control has-icons-right",attrs:{id:"matchCount"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"input has-icons-right",attrs:{name:"query",results:"5",placeholder:"Search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),t.matchCount?i("span",{staticClass:"icon is-small is-right"},[t._v(t._s(t.currentMatchIndex)+" of "+t._s(t.matchCount))]):t._e()]),t._v(" "),i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:t.prevMatch}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"chevron-left",title:"Prev Match"}})],1)])]),t._v(" "),i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:t.nextMatch}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"chevron-right",title:"Next Match"}})],1)])]),t._v(" "),i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:function(e){t.showSearch=!1,t.query=""}}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"close",title:"Close Search"}})],1)])])])]):t._e()]),t._v(" "),i("div",{staticClass:"nav-center"},[t.artworkOpen?t._e():i("div",{staticClass:"nav-item"},[t.current?t._e():i("span",[t._v(t._s(t.title))]),t._v(" "),t.current?i("span",[t._v("\n           "+t._s(t.shortTitle)),i("icon",{staticClass:"navbar-breadcrumb",attrs:{name:"caret-right"}}),t._v(t._s(t.current)+"\n        ")],1):t._e()]),t._v(" "),t.artworkOpen?i("div",{staticClass:"nav-item"},[t._v("\n        "+t._s(t.shortTitle)),i("icon",{staticClass:"navbar-breadcrumb",attrs:{name:"caret-right"}}),t._v("Artworks\n      ")],1):t._e()]),t._v(" "),i("div",{staticClass:"nav-right"},[i("a",{staticClass:"nav-item",on:{click:function(e){t.artworkOpen=!t.artworkOpen}}},[i("span",{staticClass:"icon"},[t.artworkOpen?t._e():i("icon",{attrs:{name:"picture-o",title:"Artwork"}}),t._v(" "),t.artworkOpen?i("icon",{attrs:{name:"book",title:"Book"}}):t._e()],1)])])]),t._v(" "),i("section",{ref:"main",staticClass:"main"},[i("PDF",{ref:"pdf",attrs:{id:"pdf",src:this.manifest.pdf,page:t.page,width:this.width,height:this.height,spreads:t.spreads,onImageClicked:this.onImageClicked,onOutlineReady:this.onOutlineReady,query:t.query,zoom:t.zoomLevel},on:{loaded:t.loaded,pageChanged:this.onPageChanged,found:this.onFound,match:this.onMatch}}),t._v(" "),i("div",{staticClass:"arrow",attrs:{id:"prev"},on:{click:this.prev}},[i("span",{staticClass:"icon"},[i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.outlineOpen,expression:"!outlineOpen"}],attrs:{name:"chevron-left",title:"Prev"}})],1)]),t._v(" "),i("div",{staticClass:"arrow",attrs:{id:"next"},on:{click:this.next}},[i("span",{staticClass:"icon"},[i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.outlineOpen,expression:"!outlineOpen"}],attrs:{name:"chevron-right",title:"Next"}})],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.artworkOpen,expression:"!artworkOpen"}],staticClass:"floater",class:{open:t.navOpen}},[i("div",{staticClass:"field has-addons is-pulled-left"},[i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:t.zoomOut}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"search-minus",title:"Zoom Out"}})],1)])]),t._v(" "),i("p",{staticClass:"control zoom_input"},[i("input",{staticClass:"input",attrs:{type:"text"},domProps:{value:Math.round(100*t.zoomLevel)+"%"}})]),t._v(" "),i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:t.zoomIn}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"search-plus",title:"Zoom In"}})],1)])])]),t._v(" "),i("div",{staticClass:"field has-addons is-pulled-left"},[i("p",{staticClass:"control"},[i("a",{staticClass:"button",attrs:{disabled:t.spreads?null:"disabled"},on:{click:function(e){t.setSpreads(!1)}}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"file-o",title:"Single"}})],1)])]),t._v(" "),i("p",{staticClass:"control"},[i("a",{staticClass:"button",attrs:{disabled:t.spreads?"disabled":null},on:{click:function(e){t.setSpreads(!0)}}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"columns",title:"Spread"}})],1)])])]),t._v(" "),i("div",{staticClass:"field has-addons is-pulled-left"},[i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:this.prev}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"chevron-left",title:"Prev"}})],1)])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.editingPage,expression:"!editingPage"}],staticClass:"control page_input"},[i("a",{staticClass:"button",on:{click:function(e){t.startPageEditing()}}},[t._v("\n            "+t._s(t.displayedPages)+" / "+t._s(t.totalPages)+"\n          ")])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.editingPage,expression:"editingPage"}],staticClass:"control page_input"},[i("input",{ref:"pageEditor",staticClass:"input",attrs:{type:"text"},on:{keyup:[function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;!function(e){t.onPageEdited(e)}(e)},function(e){if(!("button"in e)&&t._k(e.keyCode,"escape"))return null;t.editingPage=!1}]}})]),t._v(" "),i("p",{staticClass:"control"},[i("a",{staticClass:"button",on:{click:this.next}},[i("span",{staticClass:"icon is-small"},[i("icon",{attrs:{name:"chevron-right",title:"Next"}})],1)])])])])],1),t._v(" "),i("div",{staticClass:"modal-background navigation_background",class:{active:t.outlineOpen},on:{click:function(e){t.outlineOpen=!1}}}),t._v(" "),i("section",{staticClass:"navigation",class:{closed:!t.outlineOpen}},[i("nav",{staticClass:"nav"},[i("div",{staticClass:"nav-left nav_closer"},[i("a",{staticClass:"nav-item",on:{click:function(e){t.outlineOpen=!t.outlineOpen}}},[i("span",{staticClass:"icon"},[t.outlineOpen?i("icon",{attrs:{name:"close",title:"Close Navigation"}}):t._e()],1)])]),t._v(" "),t._m(0)]),t._v(" "),i("div",[i("article",{staticClass:"media"},[i("figure",{staticClass:"media-left"},[i("p",{staticClass:"image is-64x64"},[i("img",{staticClass:"cover_image",attrs:{src:t.manifest.cover_image_url}})])]),t._v(" "),i("div",{staticClass:"media-content"},[i("div",{staticClass:"content"},[i("p",[i("strong",{staticClass:"media_title"},[t._v(t._s(t.manifest.title))]),t._v(" "),i("small",{staticClass:"media_subtitle"},[t._v(t._s(t.manifest.subtitle))]),t._v(" "),i("small",{staticClass:"media_author"},[t._v(t._s(t.manifest.author_as_it_appears))])])])])]),t._v(" "),i("outline",{attrs:{data:t.outline,pdf:t.$refs.pdf,page:t.displayedPage},on:{onClick:this.goto,current:this.onCurrentTitle}})],1)]),t._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:t.artworkOpen,expression:"artworkOpen"}],staticClass:"artwork"},[i("div",{staticClass:"container"},[i("b-tabs",{attrs:{position:"is-centered"},on:{change:t.onTabChanged},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("b-tab-item",{attrs:{label:"Grid"}},[i("grid",{ref:"grid",attrs:{id:"grid",data:t.images},on:{onClick:this.onImageSelected}})],1),t._v(" "),i("b-tab-item",{attrs:{label:"Table"}},[i("tablegrid",{ref:"table",attrs:{id:"table",data:t.images,filter:t.tableFilter},on:{onImageClick:this.onImageSelected,onPageClick:this.onPageSelected}})],1)],1)],1)]),t._v(" "),i("div",{staticClass:"modal",class:{"is-active":t.isModalActive}},[i("div",{staticClass:"modal-background",on:{click:function(e){t.isModalActive=!1}}}),t._v(" "),i("div",{staticClass:"modal-content"},[i("detail",{attrs:{image:t.currentDetail,manifest:t.manifest},on:{infoSelected:this.onInfoSelected,pageSelected:this.onPageSelected,closed:this.onDetailClosed,displayed:this.onDetailDisplayed}})],1),t._v(" "),i("button",{staticClass:"modal-close",on:{click:function(e){t.isModalActive=!1}}})])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-right"},[i("div",{staticClass:"nav-item"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("Reader",{attrs:{"manifest-url":t.url,"page-url":t.page,"image-url":t.image,"show-grid":"grid"===t.tab,"show-table":"table"===t.tab}})},staticRenderFns:[]}}],[46]);
//# sourceMappingURL=app.7d7bd79b55563ee2ac52.js.map